<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Court Management System</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    nav {
      background-color: #333;
      color: white;
      padding: 18px 20px 14px 20px;
      text-align: center;
      font-size: 1.6rem;
      font-weight: 600;
      letter-spacing: 1px;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
      gap: 6px;
    }
    .tab-button {
      background-color: #555;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 5px 5px 0 0;
      font-size: 1rem;
      transition: background 0.2s;
    }
    .tab-button.active {
      background-color: #007bff;
      font-weight: bold;
    }
    .tab-content {
      display: none;
      padding: 20px;
      background-color: white;
      border-radius: 0 0 8px 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      margin-top: 0;
    }
    .tab-content.active {
      display: block;
    }
    .container {
      max-width: 800px;
      margin: auto;
    }
    input[type="text"], input[type="number"] {
      width: calc(100% - 22px);
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 1rem;
    }
    button.action {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 3px;
      margin-right: 10px;
      margin-bottom: 10px;
      font-size: 1rem;
      transition: background 0.2s;
    }
    button.action:hover {
      background-color: #218838;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
      font-size: 1rem;
    }
    th {
      background-color: #333;
      color: white;
    }
    pre {
      background: #f6f6f6;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
      margin-top: 8px;
    }
    .message-success {
      color: #28a745;
      font-weight: bold;
      font-size: 1.08rem;
      margin-bottom: 7px;
    }
    .message-error {
      color: #dc3545;
      font-weight: bold;
      font-size: 1.08rem;
      margin-bottom: 7px;
    }
  </style>
</head>
<body>
<nav>Court Management System</nav>
<div class="tabs">
  <button type="button" class="tab-button" onclick="openTab('court')">Court</button>
  <button type="button" class="tab-button" onclick="openTab('judge')">Judge</button>
  <button type="button" class="tab-button" onclick="openTab('lawyer')">Lawyer</button>
  <button type="button" class="tab-button" onclick="openTab('plaintiff')">Plaintiff</button>
  <button type="button" class="tab-button" onclick="openTab('defendant')">Defendant</button>
  <button type="button" class="tab-button" onclick="openTab('case')">Case</button>
  <button type="button" class="tab-button" onclick="openTab('party')">Party</button>
  <button type="button" class="tab-button" onclick="openTab('verdict')">Verdict</button>
  <button type="button" class="tab-button" onclick="openTab('caseLawyer')">Case Lawyer</button>
</div>

<div class="container">

  <!-- Court -->
  <div id="court" class="tab-content">
    <section>
      <h2>Create Court</h2>
      <input type="text" placeholder="Court Name" id="courtName">
      <input type="text" placeholder="Location" id="courtLocation">
      <input type="text" placeholder="Type" id="courtType">
      <button type="button" class="action" onclick="createCourt()">Create Court</button>
      <div id="courtRes"></div>
    </section>
    <section>
      <h2>Manage Court</h2>
      <input type="number" placeholder="Court ID" id="courtId">
      <input type="text" placeholder="Court Name" id="courtNameUpdate">
      <input type="text" placeholder="Location" id="courtLocationUpdate">
      <input type="text" placeholder="Type" id="courtTypeUpdate">
      <button type="button" class="action" onclick="updateCourt()">Update Court</button>
      <button type="button" class="action" onclick="deleteCourt()">Delete Court</button>
      <button type="button" class="action" onclick="fetchCourt()">Fetch All Courts</button>
      <div id="courtRes2"></div>
    </section>
  </div>
  <!-- Judge -->
  <div id="judge" class="tab-content">
    <section>
      <h2>Create Judge</h2>
      <input type="text" placeholder="Name" id="judgeName">
      <input type="number" placeholder="Experience (Years)" id="judgeExp">
      <input type="number" placeholder="Court ID" id="judgeCourtId">
      <button type="button" class="action" onclick="createJudge()">Create Judge</button>
      <div id="judgeRes"></div>
    </section>
    <section>
      <h2>Manage Judge</h2>
      <input type="number" placeholder="Judge ID" id="judgeId">
      <input type="text" placeholder="Name" id="judgeNameUpdate">
      <input type="number" placeholder="Experience (Years)" id="judgeExpUpdate">
      <input type="number" placeholder="Court ID" id="judgeCourtIdUpdate">
      <button type="button" class="action" onclick="updateJudge()">Update Judge</button>
      <button type="button" class="action" onclick="deleteJudge()">Delete Judge</button>
      <button type="button" class="action" onclick="fetchJudge()">Fetch All Judges</button>
      <div id="judgeRes2"></div>
    </section>
  </div>
  <!-- Lawyer -->
  <div id="lawyer" class="tab-content">
    <section>
      <h2>Create Lawyer</h2>
      <input type="text" placeholder="Name" id="lawyerName">
      <input type="text" placeholder="Specialization" id="lawyerSpecialization">
      <input type="number" placeholder="Experience (Years)" id="lawyerExperience">
      <button type="button" class="action" onclick="createLawyer()">Create Lawyer</button>
      <div id="lawyerRes"></div>
    </section>
    <section>
      <h2>Manage Lawyer</h2>
      <input type="number" placeholder="Lawyer ID" id="lawyerId">
      <input type="text" placeholder="Name" id="lawyerNameUpdate">
      <input type="text" placeholder="Specialization" id="lawyerSpecializationUpdate">
      <input type="number" placeholder="Experience (Years)" id="lawyerExperienceUpdate">
      <button type="button" class="action" onclick="updateLawyer()">Update Lawyer</button>
      <button type="button" class="action" onclick="deleteLawyer()">Delete Lawyer</button>
      <button type="button" class="action" onclick="fetchLawyer()">Fetch All Lawyers</button>
      <div id="lawyerRes2"></div>
    </section>
  </div>
  <!-- Plaintiff -->
  <div id="plaintiff" class="tab-content">
    <section>
      <h2>Create Plaintiff</h2>
      <input type="text" placeholder="Name" id="plaintiffName">
      <input type="text" placeholder="Address" id="plaintiffAddress">
      <input type="text" placeholder="Contact Number" id="plaintiffContact">
      <button type="button" class="action" onclick="createPlaintiff()">Create Plaintiff</button>
      <div id="plaintiffRes"></div>
    </section>
    <section>
      <h2>Manage Plaintiff</h2>
      <input type="number" placeholder="Plaintiff ID" id="plaintiffId">
      <input type="text" placeholder="Name" id="plaintiffNameUpdate">
      <input type="text" placeholder="Address" id="plaintiffAddressUpdate">
      <input type="text" placeholder="Contact Number" id="plaintiffContactUpdate">
      <button type="button" class="action" onclick="updatePlaintiff()">Update Plaintiff</button>
      <button type="button" class="action" onclick="deletePlaintiff()">Delete Plaintiff</button>
      <button type="button" class="action" onclick="fetchPlaintiff()">Fetch All Plaintiffs</button>
      <div id="plaintiffRes2"></div>
    </section>
  </div>
  <!-- Defendant -->
  <div id="defendant" class="tab-content">
    <section>
      <h2>Create Defendant</h2>
      <input type="text" placeholder="Name" id="defendantName">
      <input type="text" placeholder="Address" id="defendantAddress">
      <input type="text" placeholder="Contact Number" id="defendantContact">
      <button type="button" class="action" onclick="createDefendant()">Create Defendant</button>
      <div id="defendantRes"></div>
    </section>
    <section>
      <h2>Manage Defendant</h2>
      <input type="number" placeholder="Defendant ID" id="defendantId">
      <input type="text" placeholder="Name" id="defendantNameUpdate">
      <input type="text" placeholder="Address" id="defendantAddressUpdate">
      <input type="text" placeholder="Contact Number" id="defendantContactUpdate">
      <button type="button" class="action" onclick="updateDefendant()">Update Defendant</button>
      <button type="button" class="action" onclick="deleteDefendant()">Delete Defendant</button>
      <button type="button" class="action" onclick="fetchDefendant()">Fetch All Defendants</button>
      <div id="defendantRes2"></div>
    </section>
  </div>
  <!-- Case -->
  <div id="case" class="tab-content">
    <section>
      <h2>Create Case</h2>
      <input type="text" placeholder="Case Number" id="caseNumber">
      <input type="text" placeholder="Case Type" id="caseType">
      <input type="text" placeholder="Status" id="caseStatus">
      <input type="number" placeholder="Court ID" id="caseCourtId">
      <input type="number" placeholder="Judge ID" id="caseJudgeId">
      <button type="button" class="action" onclick="createCase()">Create Case</button>
      <div id="caseRes"></div>
    </section>
    <section>
      <h2>Manage Case</h2>
      <input type="number" placeholder="Case ID" id="caseId">
      <input type="text" placeholder="Case Number" id="caseNumberUpdate">
      <input type="text" placeholder="Case Type" id="caseTypeUpdate">
      <input type="text" placeholder="Status" id="caseStatusUpdate">
      <input type="number" placeholder="Court ID" id="caseCourtIdUpdate">
      <input type="number" placeholder="Judge ID" id="caseJudgeIdUpdate">
      <button type="button" class="action" onclick="updateCase()">Update Case</button>
      <button type="button" class="action" onclick="deleteCase()">Delete Case</button>
      <button type="button" class="action" onclick="fetchCase()">Fetch All Cases</button>
      <div id="caseRes2"></div>
    </section>
  </div>
  <!-- Party -->
  <div id="party" class="tab-content">
    <section>
      <h2>Create Party</h2>
      <input type="number" placeholder="Case ID" id="partyCaseId">
      <input type="text" placeholder="Party Type" id="partyType">
      <input type="number" placeholder="Plaintiff ID" id="partyPlaintiffId">
      <input type="number" placeholder="Defendant ID" id="partyDefendantId">
      <button type="button" class="action" onclick="createParty()">Create Party</button>
      <div id="partyRes"></div>
    </section>
    <section>
      <h2>Manage Party</h2>
      <input type="number" placeholder="Party ID" id="partyId">
      <input type="number" placeholder="Case ID" id="partyCaseIdUpdate">
      <input type="text" placeholder="Party Type" id="partyTypeUpdate">
      <input type="number" placeholder="Plaintiff ID" id="partyPlaintiffIdUpdate">
      <input type="number" placeholder="Defendant ID" id="partyDefendantIdUpdate">
      <button type="button" class="action" onclick="updateParty()">Update Party</button>
      <button type="button" class="action" onclick="deleteParty()">Delete Party</button>
      <button type="button" class="action" onclick="fetchParty()">Fetch All Parties</button>
      <div id="partyRes2"></div>
    </section>
  </div>
  <!-- Verdict -->
  <div id="verdict" class="tab-content">
    <section>
      <h2>Create Verdict</h2>
      <input type="number" placeholder="Case ID" id="verdictCaseId">
      <input type="number" placeholder="Judge ID" id="verdictJudgeId">
      <input type="text" placeholder="Decision" id="verdictDecision">
      <button type="button" class="action" onclick="createVerdict()">Create Verdict</button>
      <div id="verdictRes"></div>
    </section>
    <section>
      <h2>Manage Verdict</h2>
      <input type="number" placeholder="Verdict ID" id="verdictId">
      <input type="number" placeholder="Case ID" id="verdictCaseIdUpdate">
      <input type="number" placeholder="Judge ID" id="verdictJudgeIdUpdate">
      <input type="text" placeholder="Decision" id="verdictDecisionUpdate">
      <button type="button" class="action" onclick="updateVerdict()">Update Verdict</button>
      <button type="button" class="action" onclick="deleteVerdict()">Delete Verdict</button>
      <button type="button" class="action" onclick="fetchVerdict()">Fetch All Verdicts</button>
      <div id="verdictRes2"></div>
    </section>
  </div>
  <!-- Case Lawyer -->
  <div id="caseLawyer" class="tab-content">
    <section>
      <h2>Create Case Lawyer</h2>
      <input type="number" placeholder="Case ID" id="caseLawyerCaseId">
      <input type="number" placeholder="Lawyer ID" id="caseLawyerLawyerId">
      <input type="text" placeholder="Role" id="caseLawyerRole">
      <button type="button" class="action" onclick="createCaseLawyer()">Create Case Lawyer</button>
      <div id="caseLawyerRes"></div>
    </section>
    <section>
      <h2>Manage Case Lawyer</h2>
      <input type="number" placeholder="Case Lawyer ID" id="caseLawyerId">
      <input type="number" placeholder="Case ID" id="caseLawyerCaseIdUpdate">
      <input type="number" placeholder="Lawyer ID" id="caseLawyerLawyerIdUpdate">
      <input type="text" placeholder="Role" id="caseLawyerRoleUpdate">
      <button type="button" class="action" onclick="updateCaseLawyer()">Update Case Lawyer</button>
      <button type="button" class="action" onclick="deleteCaseLawyer()">Delete Case Lawyer</button>
      <button type="button" class="action" onclick="fetchCaseLawyer()">Fetch All Case Lawyers</button>
      <div id="caseLawyerRes2"></div>
    </section>
  </div>
</div>

<script>
const base = 'http://localhost:3000';

// Tab switching
function openTab(tabName) {
  const tabs = document.querySelectorAll('.tab-content');
  const buttons = document.querySelectorAll('.tab-button');
  tabs.forEach(tab => tab.classList.remove('active'));
  buttons.forEach(button => button.classList.remove('active'));
  document.getElementById(tabName).classList.add('active');
  event.target.classList.add('active');
}

// Render a JSON object as a table
function renderObjectTable(obj) {
  let html = '<table><tbody>';
  for (const [key, value] of Object.entries(obj)) {
    html += `<tr><th>${key}</th><td>${value}</td></tr>`;
  }
  html += '</tbody></table>';
  return html;
}

// Render array of objects as a table
function renderTable(data) {
  if (!Array.isArray(data) || data.length === 0) {
    return '<p>No records found.</p>';
  }
  let html = '<table><thead><tr>';
  for (const key of Object.keys(data[0])) {
    html += `<th>${key}</th>`;
  }
  html += '</tr></thead><tbody>';
  for (const row of data) {
    html += '<tr>';
    for (const value of Object.values(row)) {
      html += `<td>${value}</td>`;
    }
    html += '</tr>';
  }
  html += '</tbody></table>';
  return html;
}

// Helper: handle response for create/update/delete
async function handleActionResponse(res, elId) {
  let html = '';
  try {
    const result = await res.json();
    if (result.message) {
      html += `<div class="message-success">${result.message}</div>`;
    }
    // If the result contains other keys (e.g. record data), show as table
    const keys = Object.keys(result).filter(k => k !== 'message');
    if (keys.length > 0) {
      // If only one object (e.g. court_id, court_name, ...), show as table
      if (keys.length > 1 || typeof result[keys[0]] !== 'string') {
        html += renderObjectTable(result);
      }
    }
  } catch (e) {
    // Not JSON, fallback to plain text
    const text = await res.text();
    html = `<div class="message-error">${text}</div>`;
  }
  document.getElementById(elId).innerHTML = html;
}

// COURT
async function createCourt() {
  const court_name = document.getElementById('courtName').value;
  const location = document.getElementById('courtLocation').value;
  const court_type = document.getElementById('courtType').value;
  const res = await fetch(`${base}/api/courts`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ court_name, location, court_type })
  });
  await handleActionResponse(res, 'courtRes');
}
async function updateCourt() {
  const id = document.getElementById('courtId').value;
  const court_name = document.getElementById('courtNameUpdate').value;
  const location = document.getElementById('courtLocationUpdate').value;
  const court_type = document.getElementById('courtTypeUpdate').value;
  const res = await fetch(`${base}/api/courts/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ court_name, location, court_type })
  });
  await handleActionResponse(res, 'courtRes2');
}
async function deleteCourt() {
  const id = document.getElementById('courtId').value;
  const res = await fetch(`${base}/api/courts/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'courtRes2');
}
async function fetchCourt() {
  const res = await fetch(`${base}/api/courts`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('courtRes2').innerHTML = renderTable(data);
}

// JUDGE
async function createJudge() {
  const name = document.getElementById('judgeName').value;
  const experience_years = document.getElementById('judgeExp').value;
  const court_id = document.getElementById('judgeCourtId').value;
  const res = await fetch(`${base}/api/judges`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, experience_years, court_id })
  });
  await handleActionResponse(res, 'judgeRes');
}
async function updateJudge() {
  const id = document.getElementById('judgeId').value;
  const name = document.getElementById('judgeNameUpdate').value;
  const experience_years = document.getElementById('judgeExpUpdate').value;
  const court_id = document.getElementById('judgeCourtIdUpdate').value;
  const res = await fetch(`${base}/api/judges/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, experience_years, court_id })
  });
  await handleActionResponse(res, 'judgeRes2');
}
async function deleteJudge() {
  const id = document.getElementById('judgeId').value;
  const res = await fetch(`${base}/api/judges/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'judgeRes2');
}
async function fetchJudge() {
  const res = await fetch(`${base}/api/judges`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('judgeRes2').innerHTML = renderTable(data);
}

// LAWYER
async function createLawyer() {
  const name = document.getElementById('lawyerName').value;
  const specialization = document.getElementById('lawyerSpecialization').value;
  const experience_years = document.getElementById('lawyerExperience').value;
  const res = await fetch(`${base}/api/lawyers`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, specialization, experience_years })
  });
  await handleActionResponse(res, 'lawyerRes');
}
async function updateLawyer() {
  const id = document.getElementById('lawyerId').value;
  const name = document.getElementById('lawyerNameUpdate').value;
  const specialization = document.getElementById('lawyerSpecializationUpdate').value;
  const experience_years = document.getElementById('lawyerExperienceUpdate').value;
  const res = await fetch(`${base}/api/lawyers/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, specialization, experience_years })
  });
  await handleActionResponse(res, 'lawyerRes2');
}
async function deleteLawyer() {
  const id = document.getElementById('lawyerId').value;
  const res = await fetch(`${base}/api/lawyers/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'lawyerRes2');
}
async function fetchLawyer() {
  const res = await fetch(`${base}/api/lawyers`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('lawyerRes2').innerHTML = renderTable(data);
}

// PLAINTIFF
async function createPlaintiff() {
  const name = document.getElementById('plaintiffName').value;
  const address = document.getElementById('plaintiffAddress').value;
  const contact_number = document.getElementById('plaintiffContact').value;
  const res = await fetch(`${base}/api/plaintiffs`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, address, contact_number })
  });
  await handleActionResponse(res, 'plaintiffRes');
}
async function updatePlaintiff() {
  const id = document.getElementById('plaintiffId').value;
  const name = document.getElementById('plaintiffNameUpdate').value;
  const address = document.getElementById('plaintiffAddressUpdate').value;
  const contact_number = document.getElementById('plaintiffContactUpdate').value;
  const res = await fetch(`${base}/api/plaintiffs/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, address, contact_number })
  });
  await handleActionResponse(res, 'plaintiffRes2');
}
async function deletePlaintiff() {
  const id = document.getElementById('plaintiffId').value;
  const res = await fetch(`${base}/api/plaintiffs/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'plaintiffRes2');
}
async function fetchPlaintiff() {
  const res = await fetch(`${base}/api/plaintiffs`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('plaintiffRes2').innerHTML = renderTable(data);
}

// DEFENDANT
async function createDefendant() {
  const name = document.getElementById('defendantName').value;
  const address = document.getElementById('defendantAddress').value;
  const contact_number = document.getElementById('defendantContact').value;
  const res = await fetch(`${base}/api/defendants`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, address, contact_number })
  });
  await handleActionResponse(res, 'defendantRes');
}
async function updateDefendant() {
  const id = document.getElementById('defendantId').value;
  const name = document.getElementById('defendantNameUpdate').value;
  const address = document.getElementById('defendantAddressUpdate').value;
  const contact_number = document.getElementById('defendantContactUpdate').value;
  const res = await fetch(`${base}/api/defendants/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, address, contact_number })
  });
  await handleActionResponse(res, 'defendantRes2');
}
async function deleteDefendant() {
  const id = document.getElementById('defendantId').value;
  const res = await fetch(`${base}/api/defendants/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'defendantRes2');
}
async function fetchDefendant() {
  const res = await fetch(`${base}/api/defendants`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('defendantRes2').innerHTML = renderTable(data);
}

// CASE
async function createCase() {
  const case_number = document.getElementById('caseNumber').value;
  const case_type = document.getElementById('caseType').value;
  const status = document.getElementById('caseStatus').value;
  const court_id = document.getElementById('caseCourtId').value;
  const judge_id = document.getElementById('caseJudgeId').value;
  const res = await fetch(`${base}/api/cases`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_number, case_type, status, court_id, judge_id })
  });
  await handleActionResponse(res, 'caseRes');
}
async function updateCase() {
  const id = document.getElementById('caseId').value;
  const case_number = document.getElementById('caseNumberUpdate').value;
  const case_type = document.getElementById('caseTypeUpdate').value;
  const status = document.getElementById('caseStatusUpdate').value;
  const court_id = document.getElementById('caseCourtIdUpdate').value;
  const judge_id = document.getElementById('caseJudgeIdUpdate').value;
  const res = await fetch(`${base}/api/cases/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_number, case_type, status, court_id, judge_id })
  });
  await handleActionResponse(res, 'caseRes2');
}
async function deleteCase() {
  const id = document.getElementById('caseId').value;
  const res = await fetch(`${base}/api/cases/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'caseRes2');
}
async function fetchCase() {
  const res = await fetch(`${base}/api/cases`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('caseRes2').innerHTML = renderTable(data);
}

// PARTY
async function createParty() {
  const case_id = document.getElementById('partyCaseId').value;
  const party_type = document.getElementById('partyType').value;
  const plaintiff_id = document.getElementById('partyPlaintiffId').value;
  const defendant_id = document.getElementById('partyDefendantId').value;
  const res = await fetch(`${base}/api/parties`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_id, party_type, plaintiff_id, defendant_id })
  });
  await handleActionResponse(res, 'partyRes');
}
async function updateParty() {
  const id = document.getElementById('partyId').value;
  const case_id = document.getElementById('partyCaseIdUpdate').value;
  const party_type = document.getElementById('partyTypeUpdate').value;
  const plaintiff_id = document.getElementById('partyPlaintiffIdUpdate').value;
  const defendant_id = document.getElementById('partyDefendantIdUpdate').value;
  const res = await fetch(`${base}/api/parties/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_id, party_type, plaintiff_id, defendant_id })
  });
  await handleActionResponse(res, 'partyRes2');
}
async function deleteParty() {
  const id = document.getElementById('partyId').value;
  const res = await fetch(`${base}/api/parties/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'partyRes2');
}
async function fetchParty() {
  const res = await fetch(`${base}/api/parties`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('partyRes2').innerHTML = renderTable(data);
}

// VERDICT
async function createVerdict() {
  const case_id = document.getElementById('verdictCaseId').value;
  const judge_id = document.getElementById('verdictJudgeId').value;
  const decision = document.getElementById('verdictDecision').value;
  const res = await fetch(`${base}/api/verdicts`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_id, judge_id, decision })
  });
  await handleActionResponse(res, 'verdictRes');
}
async function updateVerdict() {
  const id = document.getElementById('verdictId').value;
  const case_id = document.getElementById('verdictCaseIdUpdate').value;
  const judge_id = document.getElementById('verdictJudgeIdUpdate').value;
  const decision = document.getElementById('verdictDecisionUpdate').value;
  const res = await fetch(`${base}/api/verdicts/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_id, judge_id, decision })
  });
  await handleActionResponse(res, 'verdictRes2');
}
async function deleteVerdict() {
  const id = document.getElementById('verdictId').value;
  const res = await fetch(`${base}/api/verdicts/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'verdictRes2');
}
async function fetchVerdict() {
  const res = await fetch(`${base}/api/verdicts`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('verdictRes2').innerHTML = renderTable(data);
}

// CASE LAWYER
async function createCaseLawyer() {
  const case_id = document.getElementById('caseLawyerCaseId').value;
  const lawyer_id = document.getElementById('caseLawyerLawyerId').value;
  const role = document.getElementById('caseLawyerRole').value;
  const res = await fetch(`${base}/api/caselawyers`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_id, lawyer_id, role })
  });
  await handleActionResponse(res, 'caseLawyerRes');
}
async function updateCaseLawyer() {
  const id = document.getElementById('caseLawyerId').value;
  const case_id = document.getElementById('caseLawyerCaseIdUpdate').value;
  const lawyer_id = document.getElementById('caseLawyerLawyerIdUpdate').value;
  const role = document.getElementById('caseLawyerRoleUpdate').value;
  const res = await fetch(`${base}/api/caselawyers/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ case_id, lawyer_id, role })
  });
  await handleActionResponse(res, 'caseLawyerRes2');
}
async function deleteCaseLawyer() {
  const id = document.getElementById('caseLawyerId').value;
  const res = await fetch(`${base}/api/caselawyers/${id}`, { method: 'DELETE' });
  await handleActionResponse(res, 'caseLawyerRes2');
}
async function fetchCaseLawyer() {
  const res = await fetch(`${base}/api/caselawyers`);
  let data;
  try {
    data = await res.json();
  } catch {
    data = [];
  }
  document.getElementById('caseLawyerRes2').innerHTML = renderTable(data);
}
</script>
</body>
</html>
